# ============================================
# DATABASE CONFIGURATION
# ============================================
DATABASE_URL=postgresql://liora:naruyaizumi@localhost:5432/liora

# PostgreSQL Connection Pool
PG_POOL_SIZE=40
PG_POOL_TIMEOUT=30
PG_MAX_RETRIES=3

# ============================================
# REDIS CONFIGURATION
# ============================================
REDIS_URL=redis://localhost:6379
# For Redis with authentication:
# REDIS_URL=redis://username:password@localhost:6379
# For Redis with TLS:
# REDIS_URL=rediss://localhost:6379

# Redis Connection Pool
REDIS_POOL_SIZE=25
REDIS_CONNECT_TIMEOUT=5000
REDIS_IDLE_TIMEOUT=30000
REDIS_MAX_RETRIES=5
REDIS_RETRY_DELAY=500

# ============================================
# CACHE CONFIGURATION
# ============================================
CACHE_MAX_SIZE=20000
CACHE_TTL_SECS=3600

# Cache TTL per type (in seconds)
CHAT_CACHE_TTL=3600
GROUP_CACHE_TTL=1200
MESSAGE_CACHE_TTL=1800
CONTACT_CACHE_TTL=7200

# ============================================
# HTTP SERVER CONFIGURATION
# ============================================
HTTP_HOST=127.0.0.1
HTTP_PORT=8765

# ============================================
# SUPERVISOR CONFIGURATION
# ============================================
MAX_CRASHES=10
CRASH_WINDOW_SECS=120
COOLDOWN_SECS=10
RESTART_DELAY_SECS=2
SHUTDOWN_TIMEOUT_SECS=8

# ============================================
# RUNTIME CONFIGURATION
# ============================================
RUST_LOG=info
NODE_ENV=production
TZ=Asia/Jakarta

# ============================================
# PERFORMANCE TUNING
# ============================================
MAX_CONCURRENT_OPS=30
BATCH_DELAY_MS=50
MAX_BATCH_RETRIES=3

# Cleanup intervals (milliseconds)
CLEANUP_INTERVAL_MS=180000
PENDING_CLEANUP_INTERVAL_MS=180000

# ============================================
# CIRCUIT BREAKER CONFIGURATION
# ============================================
CIRCUIT_BREAKER_THRESHOLD=10
CIRCUIT_BREAKER_TIMEOUT=30000

# ============================================
# HEALTH CHECKS
# ============================================
HEALTH_CHECK_INTERVAL=15000

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_AUTO_PIPELINING=true
ENABLE_OFFLINE_QUEUE=true
ENABLE_HOT_RESTART=true