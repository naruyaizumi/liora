name: üç° Sync README to Profile üç©

on:
  push:
    branches:
      - main
    paths:
      - README.md

permissions:
  contents: write

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: üçô Checkout Liora repo
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: üç© Clone Profile Repo
        run: |
          git clone https://x-access-token:${{ secrets.PAT_TOKEN }}@github.com/naruyaizumi/naruyaizumi.git profile-repo

      - name: üç∞ Ensure README exists in Profile
        run: |
          if [ ! -f profile-repo/README.md ]; then
            echo "‚ö†Ô∏è README.md not found in profile repo, copying from liora..."
            cp README.md profile-repo/README.md
          else
            echo "üì• README.md already exists, syncing with latest from liora..."
            cp README.md profile-repo/README.md
          fi

      - name: üç¨ Commit & Push to Profile Repo
        run: |
          cd profile-repo
          git config user.name "üç° Liora Bot"
          git config user.email "liora@bot"
          git add README.md || true
          git commit -m "üç∞ Sync README from Liora Repo" || echo "‚ú® No changes to commit"
          git push origin main
